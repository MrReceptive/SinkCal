<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Satisfactory AWESOME Sink Coupon Optimizer (Full List)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: system-ui, sans-serif; background: #23272e; color: #f6f6f7; padding: 24px; }
    input, button { font-size: 1em; margin: 3px 0 10px 0; padding: 3px 8px; }
    .result { background: #181a1b; border-radius: 10px; padding: 12px; margin-top: 10px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border-bottom: 1px solid #333; padding: 6px 10px; }
    th { background: #32363e; }
    tr:nth-child(even) { background: #262a30; }
    .small { font-size: 0.95em; opacity: 0.7; }
    .event { color: #7fdfff; }
    .special { color: #ffa07a; }
  </style>
</head>
<body>
  <h2>AWESOME Sink Coupon Optimizer <span class="small">(Full List &amp; Events)</span></h2>
  <div>
    <label>How many coupons do you want? <input id="numCoupons" type="number" value="1" min="1" max="100"></label><br>
    <label>Current points (or points to next coupon): <input id="points" type="number" value="0" min="0"></label>
    <button onclick="calc()">Find Best Items</button>
    <span class="small" id="fetchStatus"></span>
  </div>
  <div id="invWrap"></div>
  <div class="result" id="output"></div>
  <script>
    // Full item list (based on July 2024 wiki, including FICSMAS & event/special items)
    const itemPoints = {
      // FICSMAS/Event items (event label)
      "Blue FICSMAS Ornament": 1, "FICSIT Coupon": 1, "FICSMAS Gift": 1, "FICSMAS Tree Branch": 2, "Red FICSMAS Ornament": 2, "FICSMAS Bow": 4, "FICSMAS Actual Snow": 5,
      "Candy Cane": 6, "FICSMAS Ornament Bundle": 100, "FICSMAS Wreath": 630, "FICSMAS Star": 1200, "FICSMAS Wonder Star": 6540, "FICSMAS Decoration": 48, "FICSMAS Ornament": 120,
      "FICSMAS Bow": 180, "FICSMAS Tree Branch": 24, "FICSMAS Star": 1200, "FICSMAS Candy Cane": 240, "Gingerbread Cookie": 72, "Actual Snow": 18, "Gift": 48,
      "Red Firework": 750, "Blue Firework": 750, "Gold Firework": 1500,
      // Regular items (alphabetical, updated)
      "Iron Ore": 1, "Iron Ingot": 2, "Iron Plate": 6, "Reinforced Iron Plate": 120, "Stitched Iron Plate": 160, "Iron Rod": 4, "Screw": 2,
      "Copper Ore": 3, "Copper Ingot": 6, "Wire": 6, "Cable": 24, "Copper Sheet": 24, "Copper Powder": 72,
      "Caterium Ore": 7, "Caterium Ingot": 42, "Quickwire": 17, "Fused Quickwire": 60,
      "Steel Ingot": 8, "Steel Pipe": 24, "Steel Beam": 64, "Encased Industrial Beam": 528, "Compacted Coal": 28,
      "Concrete": 12, "Silica": 20, "Quartz Crystal": 50, "Crystal Oscillator": 3072,
      "Stator": 240, "Rotor": 140, "Motor": 1520, "Turbo Motor": 240496, "Heavy Modular Frame": 10800, "Modular Frame": 408, "Fused Modular Frame": 62840,
      "Automated Wiring": 1440, "Smart Plating": 520, "Versatile Framework": 1176, "Adaptive Control Unit": 76368, "Radio Control Unit": 32352, "Pressure Conversion Cube": 255088,
      "Circuit Board": 696, "Computer": 8352, "Supercomputer": 97352, "High-Speed Connector": 3776, "AI Limiter": 920, "Cooling System": 12006, "Heat Sink": 2804,
      "Battery": 465, "Empty Canister": 60, "Steel Canister": 60, "Empty Fluid Tank": 170, "Aluminum Casing": 393, "Aluminum Ingot": 131, "Alclad Aluminum Sheet": 266, "Aluminum Scrap": 27,
      "Sulfur": 11, "Sulfuric Acid": 152, "Black Powder": 14, "Smokeless Powder": 58, "Compacted Coal": 28,
      "Packaged Water": 130, "Packaged Oil": 180, "Packaged Fuel": 270, "Packaged Liquid Biofuel": 370, "Packaged Heavy Oil Residue": 180,
      "Packaged Turbofuel": 570, "Packaged Alumina Solution": 160, "Packaged Sulfuric Acid": 152, "Packaged Nitric Acid": 412, "Packaged Nitrogen Gas": 312, "Packaged Oxygen": 18,
      "Packaged Iron Ore": 2, "Packaged Copper Ore": 3, "Packaged Caterium Ore": 12, "Packaged Bauxite": 11, "Packaged Coal": 5, "Packaged Raw Quartz": 12, "Packaged Sulfur": 12, "Packaged Limestone": 3,
      "Packaged S.A.M. Ore": 5, "Packaged Uranium Ore": 150, "Packaged Uranium Waste": 3000,
      "Biomass": 12, "Fabric": 140, "Mycelia": 10, "Leaves": 3, "Wood": 30, "Flower Petals": 24, "Alien DNA Capsule": 1000,
      "Alien Protein": 100, "Alien Power Matrix": 210,
      "Portable Miner": 56, "Gas Filter": 608, "Iodine-Infused Filter": 2274,
      "Spiked Rebar": 50, "Stun Rebar": 186, "Shatter Rebar": 332, "Explosive Rebar": 360, "Iron Rebar": 8,
      "Nobelisk": 152, "Cluster Nobelisk": 1376, "Pulse Nobelisk": 1533, "Gas Nobelisk": 544, "Nuke Nobelisk": 19600,
      "Rifle Ammo": 25, "Turbo Rifle Ammo": 120, "Homing Rifle Ammo": 855, "Rifle": 9480,
      "Jetpack": 16580, "Blade Runners": 4088, "Gas Mask": 14960, "Hazmat Suit": 54100, "Parachute": 6080,
      "Modular Engine": 9960, "Oscillating Crystal": 3072, "Object Scanner": 1400,
      "Zipline": 5284, "Xeno-Zapper": 1880, "Xeno-Basher": 17800, "Golden Factory Cart™": 1852, "Factory Cart™": 1552,
      "Assembly Director System": 500176, "Nuclear Pasta": 538976, "AI Expansion Server": 597652, "Ballistic Warp Drive": 2895334,
      "Nuclear Pasta": 538976, "Superposition Oscillator": 37292, "Singularity Cell": 114675, "Magnetic Field Generator": 11000, "Ficsite Trigon": 1291, "Ficsite Ingot": 1936, "SAM": 20,
      "SAM Fluctuator": 1968, "Reanimated SAM": 160,
      "Employee of the Planet Cup": 84, "Cup": 84, "Golden Factory Cart™": 1852,
      "Plutonium Fuel Rod": 153184, "Plutonium Pellet": 0, "Plutonium Waste": 0, "Uranium Fuel Rod": 43468, "Uranium Waste": 0, "Uranium Ore": 35,
      "Packaged Rocket Fuel": 1028, "Blade Runners": 4088, "Biochemical Sculptor": 301778, "Hoverpack": 265632,
      "Thermal Propulsion Rocket": 728508, "Neural-Quantum Processor": 248034, "Singularity Cell": 114675,
      // A few more "cannot be sunk" are omitted, since they clog input not for coupons.
    };
    let sortedItems = Object.entries(itemPoints).sort((a, b) => b[1] - a[1]);
    const couponFormula = n => Math.pow(2, n) * 1000;

    function buildInventoryInputs() {
      let html = `<details><summary>Show/Enter Inventory (optional)</summary>
        <div style="max-height:250px;overflow:auto"><table>`;
      for (let [item, pts] of sortedItems) {
        let labelClass = "";
        if (item.toLowerCase().includes("ficmas")) labelClass = "event";
        if (item === "Alien DNA Capsule" || item === "Golden Factory Cart™") labelClass = "special";
        html += `<tr>
          <td class="${labelClass}">${item}</td>
          <td><input type="number" min="0" id="inv_${item.replace(/[^a-zA-Z0-9]/g,'_')}" style="width:70px"></td>
          <td class="small">(${pts.toLocaleString()} pts each)</td>
        </tr>`;
      }
      html += `</table><span class="small">Leave blank for items you don’t own</span></div></details>`;
      document.getElementById("invWrap").innerHTML = html;
    }
    buildInventoryInputs();

    function calc() {
      let wantCoupons = parseInt(document.getElementById("numCoupons").value) || 1;
      let currentPts = parseInt(document.getElementById("points").value) || 0;
      let ptsNeeded = 0, coupons = 0, n = 0;
      while (coupons < wantCoupons) {
        let pts = couponFormula(n);
        if (currentPts < pts) {
          ptsNeeded += pts - currentPts;
          ++coupons;
          currentPts = 0;
        } else {
          currentPts -= pts;
          ++coupons;
        }
        ++n;
      }
      let inv = {};
      for (let [item] of sortedItems) {
        let val = document.getElementById("inv_" + item.replace(/[^a-zA-Z0-9]/g,'_'));
        if (val && val.value) inv[item] = parseInt(val.value) || 0;
      }
      let rec = sortedItems.map(([item, pts])=>{
        let needed = Math.ceil(ptsNeeded/pts);
        let have = inv[item] || 0;
        let canMake = have > 0 ? Math.min(needed, have) : needed;
        return {item, pts, needed, have, canMake};
      }).sort((a,b)=>(a.needed-b.needed) || (b.pts-a.pts));
      let out = `<b>To get ${wantCoupons} coupon${wantCoupons>1?'s':''}, you need ≈${ptsNeeded.toLocaleString()} points:</b><ol>`;
      for (let r of rec.slice(0,15)) {
        out += `<li><b>${r.item}</b>: need <b>${r.needed}</b> (${r.pts.toLocaleString()} pts each)`;
        if (r.have) out += ` | you have: ${r.have}`;
        out += `</li>`;
      }
      out += `</ol><div class="small">Full item list including events & specials! Powered by MrReceptive & ChatGPT.</div>`;
      document.getElementById("output").innerHTML = out;
    }
  </script>
</body>
</html>
